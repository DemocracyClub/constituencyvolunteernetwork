{% extends 'base.html' %}
{% block title %}Welcome{% endblock %}

{% block content %}

<div class="span-5">
{% if user.is_anonymous %}
 <p>Democracy Club is building a network of volunteers who want
 to hold election candidates and respresentatives to account.</p>

 <p>If you sign up, we'll occasionally send you emails suggesting
 specific tasks that will help improve transparency in 
 your local area.</p>

 <p>For example, we want to gather information on candidates, their
 leaflets, and local news coverage of them; publicise vote analyses in
 local papers around the country; and do other tasks we haven't even
 thought of yet.  You can find out more on the 
 <a href="/aboutus/">About Us</a> page</p>

 {% if form %}
  <form action="" method="post" id="signup">
  <table>
  {{ form.as_table }}
  <tr>
   <td></td>
   <td><input type="submit" value="sign up" /></td>
  </tr>
  </table>
  </form>
 {% endif %}
{% else %}
<h2>Welcome, {{user.display_name}}</h2>
<p>In time, we'll be adding features to the website to help you volunteer in your constituency. </p>
<p>For now, though, there's not much more to do here, unless you want to <a href="{% url add_constituency %}">volunteer to help in other constituencies</a> or <a href='{% url inviteindex %}'>invite some friends</a>.
{% endif %}

</div>

<div class="span-3 last">
<div id="visualization"></div>
<p>We're trying to get volunteers in every part of the UK.  So far, we've recruited {{ volunteers }} volunteers in {{ count }} constituencies (out of a total {{ total }}).</p>
<p class="quiet">Right now we're signing people up to the current constituencies; things will automatically work with new constituencies as and when they're available.</p>

{% block js %}
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1', {packages: ['gauge']});
</script>
<script type="text/javascript">
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Label');
  data.addColumn('number', 'Value');
  data.addRows(1);
  data.setValue(0, 0, '% complete');
  data.setValue(0, 1, {{percent_complete}});

  // Create and draw the visualization.
  var chart = new google.visualization.Gauge(document.getElementById('visualization'));
  var opts = {redFrom: 90, 
              redTo: 100, 
              yellowFrom: 75,
              yellowTo: 90, 
              greenFrom: 35, 
              greenTo: 75};

   chart.draw(data, opts);
}
google.setOnLoadCallback(drawVisualization);
</script>
{% endblock %}


{% endblock %}

